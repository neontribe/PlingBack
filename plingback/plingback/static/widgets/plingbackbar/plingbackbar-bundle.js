var scope_name="plingbackbar";window[scope_name]={};var pbb=window[scope_name];
pbb.configure=function(){var a=pb.configure();a.show_feedback_link=false;a.show_feedback_link=pb.utils.getParameterByName("show_feedback_link")?pb.utils.getParameterByName("show_feedback_link"):a.show_feedback_link;a.plingback_type="topbar";a.plingback_version="0.1 beta";a.show_feedback_link&&$("div#wrapper").append('<a href="'+a.plings_endpoint+a.pling_id+'/feedback" target="_top">view feedback</a>');pbb.config=pb.config;pb.api.bind(pb.api.events.plingLoaded.toString(),pbb.plingLoaded);pb.api.bind(pb.api.events.formSending.toString(),
pbb.formSending);pb.api.bind(pb.api.events.formSent.toString(),pbb.formSent);pb.api.getPlingDetails(a.pling_id)};
pbb.plingLoaded=function(){if(pbb.config.mode==="before"){$("#rating").remove();$("#comment-heading").text("Write a comment?");pbb.ui.hintValComments='e.g. "My third time..."';$("#comment-on-it").val(pbb.ui.hintValComments);$("#comment-on-it").data("pb_hint",pbb.ui.hintValComments)}pbb.ui.bind("dataChanged",pbb.ui.switchRatingMode);$("#attendance h2").text(pbb.config.mode==="before"?"Going?":"Been?");$("#attendance1").val(pbb.config.mode==="before"?"willAttend":"attended");$("#attendance2").val(pbb.config.mode===
"before"?"willNotAttend":"didNotAttend");$("div#widget-loading").fadeOut("slow",function(){$("div#widget-loading").remove()})};pbb.formSending=function(){$('<div id="widget-sending"><img src="images/loading_cog.gif" alt="" /><br/>...sending...</div>').prependTo("div#wrapper").fadeIn("slow")};pbb.formSent=function(){$("div#widget-sending").remove();$("form").remove();$('<a id="plings-logo" href="http://www.plings.net/search" target="_top"><span>plings.net</span></a>').insertAfter("h1");$('<img id="thank-you" src="images/thankyou.png" alt="Thank you for your feedback! It has been sent to Plings.net" />').insertAfter("h1")};
pbb.api={};pbb.api.init=function(){$("form").bind("submit",pb.api.send);$("form").bind("reset",pbb.ui.reset)};pbb.ui=$({});pbb.ui.events={dataChanged:{name:"dataChanged",doc:"Triggered when the user has input data to a widget. Provides access to the data input fieldname as event.field and its validit as event.valid",attrs:["data","field","valid"],toString:function(){return this.name},trigger:function(a,d,e){var c=jQuery.Event(this.toString());c.field=a;c.field_data=d;c.valid=e;pbb.ui.trigger(c)}}};
pbb.ui.submissionTracker={};pbb.ui.submissionManager=function(a){if(a.field_data)pbb.ui.submissionTracker[a.field]=a.valid;else delete pbb.ui.submissionTracker[a.field];var d=true;jQuery.each(pbb.ui.submissionTracker,function(e,c){c||(d=false)});d&&!jQuery.isEmptyObject(pbb.ui.submissionTracker)?$("#pbform>button").show():$("#pbform>button").hide()};
pbb.ui.reset=function(){if(!$("a#yes-no").hasClass("yes")){$("a#yes-no").trigger("click");pbb.ui.events.dataChanged.trigger("attendance",false,false)}$("div.ui-stars-cancel a").trigger("click");pbb.ui.events.dataChanged.trigger("rating",false,false);$("input[name='deterrent_value']").removeAttr("checked");$("input#comment-on-it").val("").trigger("blur").val(pbb.ui.hintValComments);$("#reviewer a:visible").length===1&&pbb.ui.hideReviewerInputs($("#reviewer a:visible"));return false};
pbb.ui.switchRatingMode=function(a){if(a.field==="attendance"){switch(a.field_data){case "didNotAttend":pbb.ui.hintValComments='e.g. "Didn\'t hear about it"';a=$("#rating").width();a+="px";$("#deterrent").css("display","none");$("#rating").css({width:a}).children().fadeOut(250);$("#rating").stop().animate({opacity:"0"},250,function(){$(this).animate({width:"0px"},250,function(){$(this).css("display","none");$("#deterrent").css({width:"0px",opacity:"0"}).stop().animate({width:"132px"},250,function(){$("#deterrent").animate({opacity:"1.0"},
250).children("h2, div").fadeIn(250)})})});break;case "willNotAttend":pbb.ui.hintValComments='e.g. "Too late at night"';a=$("#rating").width();a+="px";$("#deterrent").css("display","none");$("#rating").css({width:a}).children().fadeOut(250);$("#rating").stop().animate({opacity:"0"},250,function(){$(this).animate({width:"0px"},250,function(){$(this).css("display","none");$("#deterrent").css({width:"0px",opacity:"0"}).stop().animate({width:"132px"},250,function(){$("#deterrent").animate({opacity:"1.0"},
250).children("h2, div").fadeIn(250)})})});break;case "attended":pbb.ui.hintValComments='e.g. "I would go again"';a=$("#deterrent").width();a+="px";$("#rating").css("display","none");$("#deterrent").css({width:a}).children().fadeOut(250);$("#deterrent").stop().animate({opacity:"0"},250,function(){$(this).animate({width:"0px"},250,function(){$(this).css("display","none");$("#rating").css({width:"0px",opacity:"0"}).stop().animate({width:"168px"},250,function(){$("#rating").animate({opacity:"1.0"},250).children("h2, div").fadeIn(250)})})});
break;case "willAttend":pbb.ui.hintValComments='e.g. "My third time..."';$("#rating").hide();$("#deterrent").hide()}$("#comment-on-it").val(pbb.ui.hintValComments);$("#comment-on-it").data("pb_hint",pbb.ui.hintValComments)}};
pbb.ui.hideReviewerInputs=function(a){a=$(a);a.attr("id")==="fb_connect_button"&&pbb.fb.disconnect();$("#sign-input").children(".transient").remove().each(function(){pbb.ui.events.dataChanged.trigger($(this).attr("id"),false,false)});a.siblings("a").show();a.children("span").css("visibility","visible");a.removeClass("lonely-icon");$("#reviewer input[name^=reviewer_]").val("")};
pbb.ui.showReviewerInput=function(){var a=function(d){var e=0;return function(){e+=1;if(e===1){var c=null;switch(d.attr("id")){case "phone_button":c=$('<input class="transient" type="text" name="phone" id="phone" value="Your phone"/>');pbb.ui.init_field(c,"Your phone...",pb.utils.validatePhone,"input[name=reviewer_phone]");break;case "email_button":c=$('<input class="transient" type="text" name="email" id="email" value="Your email"/>');pbb.ui.init_field(c,"Your email...",pb.utils.validateEmail,"input[name=reviewer_email]");
break;case "fb_connect_button":pbb.fb.login();break;default:c=$('<strong class="transient">Anonymous</strong>')}c&&c.appendTo("#sign-input");d.addClass("lonely-icon")}}};if($(this).siblings("a:visible").length>0){$(this).children("span").css("visibility","hidden");$(this).siblings("a").fadeOut("fast",a($(this)))}else pbb.ui.hideReviewerInputs(this)};
pbb.ui.init_field=function(a,d,e,c){a.data("storage_selector",c);a.data("pb_hint",d);a.val(d).css("color","#666").focus(function(){$(this).val()===d&&$(this).val("").css("color","#000")}).blur(function(){$(this).val()===""&&$(this).css("color","#666").removeClass("invalid").removeClass("valid").val(d)});a.bind("input paste change keyup",function(){var b=jQuery.trim($(this).val());if(e(b)){$(this).removeClass("invalid");$(this).addClass("valid");$($(this).data("storage_selector"),this.form).val(b);
pbb.ui.events.dataChanged.trigger($(this).attr("id"),b,true)}else{b!==""&&$(this).addClass("invalid");$($(this).data("storage_selector"),this.form).val("");pbb.ui.events.dataChanged.trigger($(this).attr("id"),b,false)}})};pbb.ui.hintValComments='eg."Started late but fun"';
pbb.ui.init=function(){$("#pbform>button").hide();pbb.ui.bind(pbb.ui.events.dataChanged.toString(),pbb.ui.submissionManager);$("a#yes-no").click(function(){if($(this).hasClass("yes")){$(this).removeClass("yes");$(this).siblings("input.false").attr("checked","checked")}else{$(this).addClass("yes");$(this).siblings("input.true").attr("checked","checked")}pbb.ui.events.dataChanged.trigger("attendance",$("input[name='attendance_value']:checked").val(),true)});$("#stars").stars({captionEl:$("#stars-cap"),
cancelTitle:"Clear rating",callback:function(d,e,c){pbb.ui.events.dataChanged.trigger("rating",c,c>0?true:false)}});var a=$("input#comment-on-it");a.data("pb_hint",pbb.ui.hintValComments);a.val(pbb.ui.hintValComments).css("color","#666").keyup(function(){$(this).css("background-position","0 -20px");$(this).val()?pbb.ui.events.dataChanged.trigger("comment",$(this).val(),true):pbb.ui.events.dataChanged.trigger("comment",false,false)}).focus(function(){$(this).val()===pbb.ui.hintValComments&&$(this).val("").css("color",
"#000").keyup(function(){$("#char-count").css("visibility","visible")})}).blur(function(){if($(this).val()===""){$(this).css({color:"#666","background-position":"0 0"}).val(pbb.ui.hintValComments);$("#char-count").css("visibility","hidden")}});$("input#comment-on-it").textareaCount({maxCharacterSize:140,textFontSize:"11px",textColor:"#999",textAlign:"right",warningColor:"#a64444",warningNumber:40,isCharacterCount:true,isWordCount:false,customCounter:"span#char-count",resultPrefix:""});$("#unknown_user>div.buttons>a").bind("click",
pbb.ui.showReviewerInput)};pbb.fb={app_id:"122322911120189"};pbb.fb.ui={};pbb.fb.ui.init=function(){};pbb.clear_user_info=function(){};
pbb.fb.handle_session_response=function(a){a.session?FB.api("/me",function(d){var e=$("#sign-input");e.html("");e.append('<span class="fb_birthday transient"><strong>BIRTHDAY:</strong>'+d.birthday+"</span>");e.append('<br class="transient"/>');e.append('<span class="fb_email transient"><strong>EMAIL:</strong>'+d.email+"</span>");$("#fb_connect_button").addClass("lonely-icon");e=$("#pbform");$('input[name="reviewer_email"]',e).val(d.email);$('input[name="reviewer_id"]',e).val(d.id);$('input[name="reviewer_birthday"]',
e).val(d.birthday);$('input[name="reviewer_id_source"]',e).val("http://www.facebook.com");pbb.ui.events.dataChanged.trigger("facebook",d,true)}):pbb.ui.hideReviewerInputs($("#reviewer a:visible"))};pbb.fb.login=function(){FB.login(pbb.fb.handle_session_response,{perms:"email,user_birthday"})};pbb.fb.logout=function(){FB.logout(pbb.fb.handle_session_response)};pbb.fb.disconnect=function(){FB.api({method:"Auth.revokeAuthorization"},function(){});pbb.ui.events.dataChanged.trigger("facebook",false,false)};(function(a){a.fn.textareaCount=function(d){function e(){var j=b.val(),f=j.length,i="";if(c.isCharacterCount){if(f>=c.maxCharacterSize)j=j.substring(0,c.maxCharacterSize);for(var l=0,g=0;g<f;g++)j.charAt(g)=="\n"&&l++;i=0;g=navigator.appVersion;i=g.toLowerCase().indexOf("win")!=-1?c.maxCharacterSize-l:c.maxCharacterSize;if(f>i){var k=this.scrollTop;b.val(j.substring(0,i));this.scrollTop=k}i-f<=c.warningNumber?h.css({color:c.warningColor}):h.css({color:c.textColor});i=c.resultPrefix;i+=g.toLowerCase().indexOf("win")!=
-1?b.val().length+l+"/"+c.maxCharacterSize:b.val().length+"/"+c.maxCharacterSize}if(c.isWordCount){j=(b.val()+" ").replace(/^[^A-Za-z0-9]+/gi,"").replace(/[^A-Za-z0-9]+/gi," ").split(" ").length-1;i+=" Words: "+j}h.html(i)}var c=a.extend({maxCharacterSize:-1,textFontSize:"10px",textColor:"#000000",textFamily:"Tahoma,sans-serif",textAlign:"right",warningColor:"#FF0000",warningNumber:20,isCharacterCount:true,isWordCount:false,customCounter:null,resultPrefix:"Characters: "},d),b=a(this);if(!(c.maxCharacterSize<
0)){var h=c.customCounter?a(c.customCounter):b.prev(".charleft");if(c.customCounter)h.addClass("charleft");else{a("<div class='charleft'>&nbsp;</div>").insertAfter(b);d={"font-size":c.textFontSize,"font-family":c.textFamily,color:c.textColor,"text-align":c.textAlign,width:b.width()};h.css(d)}b.bind("keyup",function(){e()}).bind("mouseover",function(){setTimeout(function(){e()},10)}).bind("paste",function(){setTimeout(function(){e()},10)})}}})(jQuery);scope_name="plingback";window[scope_name]={};var pb=window[scope_name];pb.config={gen_feedback_id:true,fixed_feedback_id:false,feedback_uri:null};
pb.configure=function(){pb.config.plings_endpoint="http://feeds.plings.net/activity.php/";pb.config.pling_id=pb.utils.getParameterByName("pling_id");if(pb.config.gen_feedback_id)pb.config.feedback_id=pb.utils.genUUID();if(pb.config.fixed_feedback_id)pb.config.feedback_id=pb.config.fixed_feedback_id;pb.config.multiuser=pb.utils.getParameterByName("multiuser")?true:false;pb.config.thanks_url_id=pb.utils.getParameterByName("thanks_url");pb.config.plingback_endpoint="/api/plingbacks";return pb.config};
pb.api=$({});
pb.api.events={plingLoaded:{name:"plingLoaded",doc:"Triggered when pling data has been fetched. Provides access to the data as event.pling",attrs:["pling"],toString:function(){return this.name}},formSending:{name:"formSending",doc:"Triggered when a form has been serialized we are awaiting the server response. Provides access to the form object as event.form",attr:["form"],toString:function(){return this.name}},formSent:{name:"formSent",doc:"Triggered when a server response to a form send has been recieved. Provides access to the response as event.data",attr:["data"],
toString:function(){return this.name}}};pb.api.getPlingDetails=function(){$.getJSON(pb.config.plings_endpoint+pb.config.pling_id.toString()+".json?suppressLinkedActivities=true&callback=?",pb.api.pling_loaded)};pb.api.pling_loaded=function(a){pb.config.pling=a.activity;pb.config.mode=Date.parseString(pb.config.pling.Starts,"yyyy-MM-dd HH:mm:ss").isBefore(new Date)?"after":"before";a=jQuery.Event(pb.api.events.plingLoaded.toString());a.pling=pb.config.pling;pb.api.trigger(a)};
pb.api.send=function(a){var d=null;d=a.target.tagName==="FORM"?$(a.target):$(a.target.form);var e={};e.pling_id=pb.config.pling_id;e.plingback_type=pb.config.plingback_type;e.plingback_version=pb.config.plingback_version;$("input",d).each(function(){$(this).val($(this).val()===$(this).data("pb_hint")?"":$(this).val())});d.serializeArray();jQuery.each(d.serializeArray(),function(b,h){if(h.value===0||h.value)if(e.hasOwnProperty(h.name))if(e[h.name]instanceof Array)e[h.name].push(h.value);else e[h.name]=
[e[h.name],h.value];else e[h.name]=h.value});a=pb.config.plingback_endpoint;var c="post";if(pb.config.feedback_id){e.feedback_id=pb.config.feedback_id;a+="/";a+=pb.config.feedback_id;c="put";if(pb.config.feedback_uri){c="post";a+="/";a+=e.feedback_attribute}if($("input[name=mode]",d).val()==="overwrite")c="put"}jQuery.ajax({type:c,url:a,data:e,success:pb.api.sendCallback,dataType:"json"});a=jQuery.Event(pb.api.events.formSending.toString());a.form=d;pb.api.trigger(a);return false};
pb.api.sendCallback=function(a){pb.config.feedback_id=a.feedback_id;pb.config.feedback_uri=a.feedback_uri;var d=jQuery.Event(pb.api.events.formSent.toString());d.data=a;pb.api.trigger(d)};pb.utils={};pb.utils.getParameterByName=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(window.location.href);return a===null?"":a[1]};
pb.utils.genUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var d=Math.random()*16|0;return(a=="x"?d:d&3|8).toString(16)}).toUpperCase()};pb.utils.validateEmail=function(a){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(a)};
pb.utils.validatePhone=function(a){return/^((\+\d{1,3}(-| |\s)?\(?\d\)?(-| |\s)?\d{1,5})|(\(?\d{2,6}\)?))(-| |\s)?(\d{3,4})(-| |\s)?(\d{4})(( x| ext)\d{1,5}){0,1}$/.test(a.replace(/\s+/g,""))};(function(a){a.widget("ui.stars",{options:{inputType:"radio",split:0,disabled:false,cancelTitle:"Cancel Rating",cancelValue:0,cancelShow:true,disableValue:true,oneVoteOnly:false,showTitles:false,captionEl:null,callback:null,starWidth:16,cancelClass:"ui-stars-cancel",starClass:"ui-stars-star",starOnClass:"ui-stars-star-on",starHoverClass:"ui-stars-star-hover",starDisabledClass:"ui-stars-star-disabled",cancelHoverClass:"ui-stars-cancel-hover",cancelDisabledClass:"ui-stars-cancel-disabled"},_create:function(){function d(j,
f){if(j!=-1){var i=f?b.starHoverClass:b.starOnClass,l=f?b.starOnClass:b.starHoverClass;c.$stars.eq(j).prevAll("."+b.starClass).andSelf().removeClass(l).addClass(i);c.$stars.eq(j).nextAll("."+b.starClass).removeClass(b.starHoverClass+" "+b.starOnClass);c._showCap(b.id2title[j])}else e()}function e(){c.$stars.removeClass(b.starOnClass+" "+b.starHoverClass);c._showCap("")}var c=this,b=this.options,h=0;this.element.data("former.stars",this.element.html());b.isSelect=b.inputType=="select";this.$form=a(this.element).closest("form");
this.$selec=b.isSelect?a("select",this.element):null;this.$rboxs=b.isSelect?a("option",this.$selec):a(":radio",this.element);this.$stars=this.$rboxs.map(function(j){var f={value:this.value,title:(b.isSelect?this.text:this.title)||this.value,isDefault:b.isSelect&&this.defaultSelected||this.defaultChecked};if(j==0){b.split=typeof b.split!="number"?0:b.split;b.val2id=[];b.id2val=[];b.id2title=[];b.name=b.isSelect?c.$selec.get(0).name:this.name;b.disabled=b.disabled||(b.isSelect?a(c.$selec).attr("disabled"):
a(this).attr("disabled"))}if(f.value==b.cancelValue){b.cancelTitle=f.title;return null}b.val2id[f.value]=h;b.id2val[h]=f.value;b.id2title[h]=f.title;if(f.isDefault){b.checked=h;b.value=b.defaultValue=f.value;b.title=f.title}j=a("<div/>").addClass(b.starClass);f=a("<a/>").attr("title",b.showTitles?f.title:"").text(f.value);if(b.split){var i=h%b.split,l=Math.floor(b.starWidth/b.split);j.width(l);f.css("margin-left","-"+i*l+"px")}h++;return j.append(f).get(0)});b.items=h;b.isSelect?this.$selec.remove():
this.$rboxs.remove();this.$cancel=a("<div/>").addClass(b.cancelClass).append(a("<a/>").attr("title",b.showTitles?b.cancelTitle:"").text(b.cancelValue));b.cancelShow&=!b.disabled&&!b.oneVoteOnly;b.cancelShow&&this.element.append(this.$cancel);this.element.append(this.$stars);if(b.checked===undefined){b.checked=-1;b.value=b.defaultValue=b.cancelValue;b.title=""}this.$value=a("<input type='hidden' name='"+b.name+"' value='"+b.value+"' />");this.element.append(this.$value);this.$stars.bind("click.stars",
function(j){if(!b.forceSelect&&b.disabled)return false;var f=c.$stars.index(this);b.checked=f;b.value=b.id2val[f];b.title=b.id2title[f];c.$value.attr({disabled:b.disabled?"disabled":"",value:b.value});d(f,false);c._disableCancel();!b.forceSelect&&c.callback(j,"star")}).bind("mouseover.stars",function(){if(b.disabled)return false;var j=c.$stars.index(this);d(j,true)}).bind("mouseout.stars",function(){if(b.disabled)return false;d(c.options.checked,false)});this.$cancel.bind("click.stars",function(j){if(!b.forceSelect&&
(b.disabled||b.value==b.cancelValue))return false;b.checked=-1;b.value=b.cancelValue;b.title="";c.$value.val(b.value);b.disableValue&&c.$value.attr({disabled:"disabled"});e();c._disableCancel();!b.forceSelect&&c.callback(j,"cancel")}).bind("mouseover.stars",function(){if(c._disableCancel())return false;c.$cancel.addClass(b.cancelHoverClass);e();c._showCap(b.cancelTitle)}).bind("mouseout.stars",function(){if(c._disableCancel())return false;c.$cancel.removeClass(b.cancelHoverClass);c.$stars.triggerHandler("mouseout.stars")});
this.$form.bind("reset.stars",function(){!b.disabled&&c.select(b.defaultValue)});a(window).unload(function(){c.$cancel.unbind(".stars");c.$stars.unbind(".stars");c.$form.unbind(".stars");c.$selec=c.$rboxs=c.$stars=c.$value=c.$cancel=c.$form=null});this.select(b.value);b.disabled&&this.disable()},_disableCancel:function(){var d=this.options,e=d.disabled||d.oneVoteOnly||d.value==d.cancelValue;e?this.$cancel.removeClass(d.cancelHoverClass).addClass(d.cancelDisabledClass):this.$cancel.removeClass(d.cancelDisabledClass);
this.$cancel.css("opacity",e?0.5:1);return e},_disableAll:function(){var d=this.options;this._disableCancel();d.disabled?this.$stars.filter("div").addClass(d.starDisabledClass):this.$stars.filter("div").removeClass(d.starDisabledClass)},_showCap:function(d){var e=this.options;e.captionEl&&e.captionEl.text(d)},value:function(){return this.options.value},select:function(d){var e=this.options;d=d==e.cancelValue?this.$cancel:this.$stars.eq(e.val2id[d]);e.forceSelect=true;d.triggerHandler("click.stars");
e.forceSelect=false},selectID:function(d){var e=this.options;d=d==-1?this.$cancel:this.$stars.eq(d);e.forceSelect=true;d.triggerHandler("click.stars");e.forceSelect=false},enable:function(){this.options.disabled=false;this._disableAll()},disable:function(){this.options.disabled=true;this._disableAll()},destroy:function(){this.$form.unbind(".stars");this.$cancel.unbind(".stars").remove();this.$stars.unbind(".stars").remove();this.$value.remove();this.element.unbind(".stars").html(this.element.data("former.stars")).removeData("stars");
return this},callback:function(d,e){var c=this.options;c.callback&&c.callback(this,e,c.value,d);c.oneVoteOnly&&!c.disabled&&this.disable()}});a.extend(a.ui.stars,{version:"3.0.1"})})(jQuery);jQuery.preloadCssImages=function(a){function d(){clearTimeout(f);if(h&&h.length&&h[b]){b++;if(a.statusTextEl){var i=h[b]?"Now Loading: <span>"+h[b].split("/")[h[b].split("/").length-1]:"Loading complete";jQuery(a.statusTextEl).html('<span class="numLoaded">'+b+'</span> of <span class="numTotal">'+h.length+'</span> loaded (<span class="percentLoaded">'+(b/h.length*100).toFixed(0)+'%</span>) <span class="currentImg">'+i+"</span></span>")}if(a.statusBarEl){i=jQuery(a.statusBarEl).width();jQuery(a.statusBarEl).css("background-position",
-(i-(i*b/h.length).toFixed(0))+"px 50%")}e()}}function e(){if(h&&h.length&&h[b]){var i=new Image;i.src=h[b];i.complete?d():jQuery(i).bind("error load onreadystatechange",d);f=setTimeout(d,a.errorDelay)}}function c(i,l){for(var g=false,k=[],r=[],q,o=i.length;o--;){var n="";if(l&&l[o])q=l[o];else{q=(i[o].href?i[o].href:"window.location.href").split("/");q.pop();if(q=q.join("/"))q+="/"}if(i[o].cssRules||i[o].rules){j=i[o].cssRules?i[o].cssRules:i[o].rules;for(var p=j.length;p--;)if(j[p].style&&j[p].style.cssText){var m=
j[p].style.cssText;if(m.toLowerCase().indexOf("url")!=-1)n+=m}else if(j[p].styleSheet){k.push(j[p].styleSheet);g=true}}if(n=n.match(/[^\("]+\.(gif|jpg|jpeg|png)/g))for(p=n.length;p--;){m=n[p].charAt(0)=="/"||n[p].match("://")?n[p]:q+n[p];jQuery.inArray(m,h)==-1&&h.push(m)}if(!g&&i[o].imports&&i[o].imports.length){n=0;for(p=i[o].imports.length;n<p;n++){m=i[o].imports[n].href;m=m.split("/");m.pop();if(m=m.join("/"))m+="/";m=m.charAt(0)=="/"||m.match("://")?m:q+m;r.push(m);k.push(i[o].imports[n])}}}if(k.length){c(k,
r);return false}for(g=a.simultaneousCacheLoading;g--;)setTimeout(e,g)}a=jQuery.extend({statusTextEl:null,statusBarEl:null,errorDelay:999,simultaneousCacheLoading:2},a);var b=0,h=[],j,f;c(document.styleSheets);return h};Date.$VERSION=1.02;Date.LZ=function(a){return(a<0||a>9?"":"0")+a};Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.monthAbbreviations=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.dayAbbreviations=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];Date.preferAmericanFormat=true;
if(!Date.prototype.getFullYear)Date.prototype.getFullYear=function(){var a=this.getYear();return a<1900?a+1900:a};
Date.parseString=function(a,d){if(typeof d=="undefined"||d==null||d==""){var e=["M/d/y","M-d-y","M.d.y","M/d","M-d"],c=["d/M/y","d-M-y","d.M.y","d/M","d-M"];c=[["y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d","MMM-d","d-MMM"],Date.preferAmericanFormat?e:c,Date.preferAmericanFormat?c:e];for(e=0;e<c.length;e++)for(var b=c[e],h=0;h<b.length;h++){var j=Date.parseString(a,b[h]);if(j!=null)return j}return null}this.isInteger=function(p){for(var m=0;m<p.length;m++)if("1234567890".indexOf(p.charAt(m))==
-1)return false;return true};this.getInt=function(p,m,u,s){for(;s>=u;s--){var t=p.substring(m,m+s);if(t.length<u)break;if(this.isInteger(t))return t}return null};a+="";d+="";b=c=0;for(var f=e="",i=(new Date).getFullYear(),l=1,g=1,k=0,r=0,q=0,o="";b<d.length;){e=d.charAt(b);for(f="";d.charAt(b)==e&&b<d.length;)f+=d.charAt(b++);if(f=="yyyy"||f=="yy"||f=="y"){if(f=="yyyy")j=h=4;if(f=="yy")j=h=2;if(f=="y"){h=2;j=4}i=this.getInt(a,c,h,j);if(i==null)return null;c+=i.length;if(i.length==2)i=i>70?1900+(i-
0):2E3+(i-0)}else if(f=="MMM"||f=="NNN"){l=0;f=f=="MMM"?Date.monthNames.concat(Date.monthAbbreviations):Date.monthAbbreviations;for(e=0;e<f.length;e++){var n=f[e];if(a.substring(c,c+n.length).toLowerCase()==n.toLowerCase()){l=e%12+1;c+=n.length;break}}if(l<1||l>12)return null}else if(f=="EE"||f=="E"){f=f=="EE"?Date.dayNames:Date.dayAbbreviations;for(e=0;e<f.length;e++){n=f[e];if(a.substring(c,c+n.length).toLowerCase()==n.toLowerCase()){c+=n.length;break}}}else if(f=="MM"||f=="M"){l=this.getInt(a,
c,f.length,2);if(l==null||l<1||l>12)return null;c+=l.length}else if(f=="dd"||f=="d"){g=this.getInt(a,c,f.length,2);if(g==null||g<1||g>31)return null;c+=g.length}else if(f=="hh"||f=="h"){k=this.getInt(a,c,f.length,2);if(k==null||k<1||k>12)return null;c+=k.length}else if(f=="HH"||f=="H"){k=this.getInt(a,c,f.length,2);if(k==null||k<0||k>23)return null;c+=k.length}else if(f=="KK"||f=="K"){k=this.getInt(a,c,f.length,2);if(k==null||k<0||k>11)return null;c+=k.length;k++}else if(f=="kk"||f=="k"){k=this.getInt(a,
c,f.length,2);if(k==null||k<1||k>24)return null;c+=k.length;k--}else if(f=="mm"||f=="m"){r=this.getInt(a,c,f.length,2);if(r==null||r<0||r>59)return null;c+=r.length}else if(f=="ss"||f=="s"){q=this.getInt(a,c,f.length,2);if(q==null||q<0||q>59)return null;c+=q.length}else if(f=="a"){if(a.substring(c,c+2).toLowerCase()=="am")o="AM";else if(a.substring(c,c+2).toLowerCase()=="pm")o="PM";else return null;c+=2}else if(a.substring(c,c+f.length)!=f)return null;else c+=f.length}if(c!=a.length)return null;if(l==
2)if(i%4==0&&i%100!=0||i%400==0){if(g>29)return null}else if(g>28)return null;if(l==4||l==6||l==9||l==11)if(g>30)return null;if(k<12&&o=="PM")k=k-0+12;else if(k>11&&o=="AM")k-=12;return new Date(i,l-1,g,k,r,q)};Date.isValid=function(a,d){return Date.parseString(a,d)!=null};Date.prototype.isBefore=function(a){if(a==null)return false;return this.getTime()<a.getTime()};Date.prototype.isAfter=function(a){if(a==null)return false;return this.getTime()>a.getTime()};
Date.prototype.equals=function(a){if(a==null)return false;return this.getTime()==a.getTime()};Date.prototype.equalsIgnoreTime=function(a){if(a==null)return false;var d=(new Date(this.getTime())).clearTime();a=(new Date(a.getTime())).clearTime();return d.getTime()==a.getTime()};
Date.prototype.format=function(a){a+="";var d="",e=0,c="",b="";c=this.getYear()+"";b=this.getMonth()+1;var h=this.getDate(),j=this.getDay(),f=this.getHours(),i=this.getMinutes(),l=this.getSeconds(),g={};if(c.length<4)c=""+(+c+1900);g.y=""+c;g.yyyy=c;g.yy=c.substring(2,4);g.M=b;g.MM=Date.LZ(b);g.MMM=Date.monthNames[b-1];g.NNN=Date.monthAbbreviations[b-1];g.d=h;g.dd=Date.LZ(h);g.E=Date.dayAbbreviations[j];g.EE=Date.dayNames[j];g.H=f;g.HH=Date.LZ(f);g.h=f==0?12:f>12?f-12:f;g.hh=Date.LZ(g.h);g.K=g.h-
1;g.k=g.H+1;g.KK=Date.LZ(g.K);g.kk=Date.LZ(g.k);g.a=f>11?"PM":"AM";g.m=i;g.mm=Date.LZ(i);g.s=l;for(g.ss=Date.LZ(l);e<a.length;){c=a.charAt(e);for(b="";a.charAt(e)==c&&e<a.length;)b+=a.charAt(e++);d+=typeof g[b]!="undefined"?g[b]:b}return d};Date.prototype.getDayName=function(){return Date.dayNames[this.getDay()]};Date.prototype.getDayAbbreviation=function(){return Date.dayAbbreviations[this.getDay()]};Date.prototype.getMonthName=function(){return Date.monthNames[this.getMonth()]};
Date.prototype.getMonthAbbreviation=function(){return Date.monthAbbreviations[this.getMonth()]};Date.prototype.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};
Date.prototype.add=function(a,d){if(typeof a=="undefined"||a==null||typeof d=="undefined"||d==null)return this;d=+d;if(a=="y")this.setFullYear(this.getFullYear()+d);else if(a=="M")this.setMonth(this.getMonth()+d);else if(a=="d")this.setDate(this.getDate()+d);else if(a=="w")for(var e=d>0?1:-1;d!=0;){for(this.add("d",e);this.getDay()==0||this.getDay()==6;)this.add("d",e);d-=e}else if(a=="h")this.setHours(this.getHours()+d);else if(a=="m")this.setMinutes(this.getMinutes()+d);else a=="s"&&this.setSeconds(this.getSeconds()+
d);return this};
