var scope_name="fastfeedback";window[scope_name]={};var ff=window[scope_name];
ff.configure=function(){var b=pb.configure();b.plingback_type="fastfeedback";b.plingback_version="0.1 beta";b.slide_duration=300;b.show_feedback_link=false;b.slides_before=["attendance","rating_deterrent","comment","reviewer","thankyou"];b.slides_after=["attendance","rating_deterrent","comment","reviewer","thankyou"];b.skin_color=pb.utils.getParameterByName("skin_color")?pb.utils.getParameterByName("skin_color"):"green";b.show_feedback_link=pb.utils.getParameterByName("show_feedback_link")?pb.utils.getParameterByName("show_feedback_link"):
b.show_feedback_link;$("link#css-colour").attr("href",colourHref="images/"+b.skin_color+"/colours.css");b.show_feedback_link&&$("#bottom").append('<a href="'+b.plings_endpoint+b.pling_id+'/feedback" target="_top">view feedback</a>');ff.config=pb.config;pb.api.bind(pb.api.events.plingLoaded.toString(),ff.plingLoaded);pb.api.getPlingDetails(b.pling_id)};
ff.plingLoaded=function(){ff.configure_slide_flow();ff.scroller.init();ff.ui.init();$("span.pling_name").text(ff.config.pling.Name);$("span.pling_name").width()>250&&$("span.pling_name").wrapInner('<marquee direction="left" behavior="alternate" scrollamount="2"></marquee>');ff.scroller.controller.trigger("goto",[0])};
ff.configure_slide_flow=function(){var b=ff.config["slides_"+ff.config.mode],a=$("#slides div.slide");a.remove();var e=$("#navigation a");e.remove();for(var c=b.length,d=0;d<c;d++){var f=jQuery.grep(e,function(i){return $(i).attr("href")==="#"+b[d]});f&&$(f[0]).appendTo("#navigation");(f=jQuery.grep(a,function(i){return $(i).attr("id")===b[d]}))&&$(f[0]).appendTo("div.slides_container")}a=$("#navigation a");for(e=0;e<a.length;e++)$(a[e]).prepend(e+1);$("form").bind("submit",pb.api.send)};ff.api={};
ff.api.init=function(){pb.api.bind(pb.api.events.formSending.toString(),ff.ui.form_sending);pb.api.bind(pb.api.events.formSent.toString(),ff.ui.form_sent)};ff.ui={};ff.ui.init=function(){ff.ui.reset();ff.ui.attendance.init();ff.ui.stars.init();ff.ui.deterrent.init();ff.ui.comment.init();ff.ui.reviewer.init();ff.fb.ui.init()};ff.ui.reset=function(){$("form").each(function(){this.reset();$(this).id==="reviewer_form"&&$('input[name^="reviewer_"]',this).val("")})};
ff.ui.enable_submission=function(b){$("button.submit",b).removeAttr("disabled")};ff.ui.disable_submission=function(b){$("button.submit",b).attr("disabled","disabled")};ff.ui.current_form=null;ff.ui.form_sending=function(b){ff.ui.current_form=$(b.form);$("button.submit",ff.ui.current_form).css({"background-position":"0 -78px",visibility:"visible"});$("input, textarea, button.submit",ff.ui.current_form).attr("disabled","disabled")};
ff.ui.form_sent=function(){if($(ff.ui.current_form).attr("id")==="reviewer_form"&&ff.config.multiuser){$("#the_end").empty();$("#the_end").text("Ready for the next person in ");$("#the_end").append('<span id="refresh_counter">5</span> seconds');$('input[name="reviewer_id_source"]',ff.ui.current_form).val()==="http://www.facebook.com"&&ff.fb.logout();setInterval(function(){$("#refresh_counter").text($("#refresh_counter").text()-1)},1E3);setTimeout(function(){location.reload(true)},5100)}if(ff.scroller.skipTo!==
null){ff.scroller.controller.trigger("goto",[ff.scroller.skipTo]);ff.scroller.skipTo=null}else ff.scroller.controller.trigger("next");setTimeout(function(){$("button.submit",ff.ui.current_form).css("background-position","0 0");$("input, textarea",ff.ui.current_form).removeAttr("disabled");ff.ui.current_form.append('<input type="hidden" name="mode" value="overwrite"/>')},ff.config.slide_duration+500)};ff.ui.attendance={};
ff.ui.attendance.init=function(){ff.ui.attendance.configure();$('#attendance form input[type="radio"]').bind("change",function(){ff.ui.enable_submission(this.form);ff.ui.deterrent.configure($(this).val())})};
ff.ui.attendance.configure=function(){if(ff.config.mode==="before"){ff.ui.comment.hint='eg. "I\'ll be coming if I can persuade my friends"';$("#attendance1").attr("value","willAttend").siblings("span").text("I'd like to go!");$("#attendance2").attr("value","willNotAttend").siblings("span").text("I'm not going.");$("#attendance h3").text("Going?");$("div#attendance input").click(function(){var b=$(this).attr("value");ff.ui.comment.hint=b==="willAttend"?'eg. "I\'ll be coming if I can persuade my friends"':
'eg. "I like the sound of it but can\'t get there"';ff.ui.comment.init()})}else{ff.ui.comment.hint='eg. "It was very inspiring but it started late"';$("div#attendance input").click(function(){var b=$(this).attr("value");ff.ui.comment.hint=b==="attended"?'eg. "It was very inspiring but it started late"':'eg. "I\'ll try to make it next week"';ff.ui.comment.init()})}};ff.ui.deterrent={};
ff.ui.deterrent.configure=function(b){switch(b){case "didNotAttend":$("#rating").hide();$("#deterrent").show();break;case "attended":$("#deterrent").hide();$("#rating").show();break;case "willNotAttend":$("#rating_deterrent").show();$("#rating").hide();$("#deterrent").show();$("#navigation > a[href=#rating_deterrent]").show().animate({opacity:1},500);b=$("#navigation a");for(var a=0;a<b.length;a++)$(b[a]).text(a+1);ff.scroller.skipTo=null;break;case "willAttend":$("#rating_deterrent").hide();$("#navigation > a[href=#rating_deterrent]").animate({opacity:0},
500,function(){$("#navigation > a[href=#rating_deterrent]").hide()});b=$("#navigation a[href!=#rating_deterrent]");for(a=0;a<b.length;a++)$(b[a]).text(a+1);ff.scroller.skipTo=2}};
ff.ui.deterrent.init=function(){$("#deterrent label").hover(function(){var b=$(this).children().text();$("#deterrent-tip").text(b)},function(){$("#deterrent-tip").text("")});$("#deterrent label").toggle(function(b){b.preventDefault();ff.ui.enable_submission(this.form);$(this).addClass("chosen").hover(function(){$(this).hasClass("chosen")&&$(this).addClass("hover")},function(){$(this).removeClass("hover")}).next("input[type=checkbox]").attr("checked","checked")},function(b){b.preventDefault();$(this).removeClass("chosen hover").next("input[type=checkbox]").attr("checked",
"");$(".chosen").length===0&&ff.ui.disable_submission(this.form)});$("#deterrent form").each(function(){ff.ui.disable_submission(this)})};ff.ui.stars={rubric:"Choose your Rating"};ff.ui.stars.init=function(){$("#stars").stars({captionEl:$("#stars-cap"),callback:function(b,a,e){if(e>0)ff.ui.enable_submission($(b.element).parents("form"));else{ff.ui.disable_submission($(b.element).parents("form"));$("#stars-cap").text(ff.ui.stars.rubric)}}});$("#stars-cap").text(ff.ui.stars.rubric)};ff.ui.comment={};
ff.ui.comment.hint=$("#comment-on-it").attr("value");ff.ui.comment.init=function(){$("#comment textarea").keyup(function(){$(this).val().length>0?ff.ui.enable_submission(this.form):ff.ui.disable_submission(this.form)});var b=$("textarea#comment-on-it");b.data("pb_hint",ff.ui.comment.hint);b.val(ff.ui.comment.hint).css("color","#999").focus(function(){$(this).val()===ff.ui.comment.hint&&$(this).val("").css("color","#000")}).blur(function(){$(this).val()===""&&$(this).css({color:"#999"}).val(ff.ui.comment.hint)})};
ff.ui.reviewer={};ff.ui.validator_input=function(b,a,e,c){b=$(b);b.data("pb_hint",a);b.val(a).css("color","#999").focus(function(){$(this).val()===a&&$(this).val("").css("color","#000")}).blur(function(){$(this).val()===""&&$(this).css("color","#999").removeClass("invalid").val(a)});b.keyup(function(){var d=$(this).val();if(e(d)){$(this).removeClass("invalid");$(c,this.form).val(d);ff.ui.enable_submission(this.form)}else{d!==""&&$(this).addClass("invalid");$(c,this.form).val("");ff.ui.disable_submission(this.form)}})};
ff.ui.reviewer.init=function(){ff.ui.validator_input($("input[name=email]"),"Your email...",pb.utils.validateEmail,"input[name=reviewer_email]");ff.ui.validator_input($("input[name=phone]"),"Your phone...",pb.utils.validatePhone,"input[name=reviewer_phone]");$("#reviewer #unknown_user button").hover(function(){var a=$(this).text();$("#sign-tip").text(a).css("padding","5px 0 0 0")},function(){$("#sign-tip").text("").css("padding","0")});var b=function(a){a=$(a.target);$('input[name^="reviewer_"]',
this.form).val("");$("#phone, #email").val("");$(":animated",a.form).stop(true,true);if(a.hasClass("open")){switch(a.attr("id")){case "email_button":$("div#email-form").hide();ff.ui.disable_submission(this.form);break;case "phone_button":$("div#phone-form").hide();ff.ui.disable_submission(this.form);break;case "anon_button":$("p#anonymous-text").hide();ff.ui.disable_submission(this.form)}a.removeClass("open");$("#sign-tip").show()}else{var e=null;switch(a.attr("id")){case "email_button":e=$("div#email-form");
ff.ui.disable_submission(this.form);break;case "phone_button":e=$("div#phone-form");ff.ui.disable_submission(this.form);break;case "anon_button":e=$("p#anonymous-text");ff.ui.enable_submission(this.form)}e.siblings(".slidey").hide();$("#sign-tip").hide();a.siblings().removeClass("open");e.slideDown("slow");a.addClass("open")}};$("button#email_button").bind("click",b);$("button#phone_button").bind("click",b);$("button#anon_button").bind("click",b)};ff.scroller={};ff.scroller.controller=null;
ff.scroller.skipTo=null;ff.scroller.selectNav=function(){$(this).parents("#navigation").find("a").removeClass("selected").end().end().addClass("selected")};
ff.scroller.init=function(){var b=$("#slides .slides_container > div.slide"),a=$("#navigation a"),e=$("#slides .slides_container");ff.scroller.controller=e;var c={target:$("#slides").css("overflow","hidden"),items:b,navigation:a,axis:"xy",onAfter:function(d){d=$("#navigation").find('a[href$="'+d.id+'"]').get(0);ff.scroller.selectNav.call(d)},offset:parseInt(e.css("paddingTop")||0)*-1,duration:ff.config.slide_duration,easing:"easeInSine",cycle:false};e.css("width",b[0].offsetWidth*$("#slides .slides_container > div").length);
$("#content").serialScroll(c);a.click(ff.scroller.selectNav);$("em",a).click(function(){ff.scroller.controller.trigger("next")})};ff.fb={app_id:"122322911120189"};ff.fb.ui={};ff.fb.ui.init=function(){$("#fb_connect_button").bind("click",ff.fb.login);$(".fb_disconnect").live("click",ff.fb.disconnect)};ff.clear_user_info=function(){$("#user-info").hide("fast").empty();$("#unknown_user").show("fast")};
ff.fb.handle_session_response=function(b){b.session?FB.api("/me",function(a){var e=$("#user-info");e.append('<h4><span class="fb_name"><b>Hello, '+a.first_name+"!</b></span></h4>");e.append("<span>We would like to sign your feedback with:</span>");var c=$('<div id="stored-data"></div>');c.append('<span class="fb_birthday"><strong>BIRTHDAY:</strong> '+a.birthday+"</span>");c.append('<span class="fb_email"><strong>EMAIL:</strong> '+a.email+"</span>");e.append(c);c=$("#reviewer form");$('input[name="reviewer_email"]',
c).val(a.email);$('input[name="reviewer_id"]',c).val(a.id);$('input[name="reviewer_birthday"]',c).val(a.birthday);$('input[name="reviewer_id_source"]',c).val("http://www.facebook.com");ff.ui.enable_submission(c);$('<button class="fb_disconnect" type="button">disconnect</button>').prependTo("#button-controls");FB.XFBML.parse(document.getElementById("user-info"));e.show();$("#unknown_user").hide()}):ff.clear_user_info()};ff.fb.login=function(){FB.login(ff.fb.handle_session_response,{perms:"email,user_birthday"})};
ff.fb.logout=function(){FB.logout(ff.fb.handle_session_response)};ff.fb.disconnect=function(){FB.api({method:"Auth.revokeAuthorization"},function(){});$("button.fb_disconnect").remove();ff.clear_user_info();ff.ui.disable_submission($("#reviewer form"))};(function(b){var a=b.serialScroll=function(e){return b(window).serialScroll(e)};a.defaults={duration:1E3,axis:"x",event:"click",start:0,step:1,lock:true,cycle:true,constant:true};b.fn.serialScroll=function(e){return this.each(function(){function c(r){r.data+=o;d(r,this)}function d(r,w){if(!isNaN(w))r.data=w;var s=r.data,A=r.type,y=h.exclude?i().slice(0,-h.exclude):i(),B=y.length,x=y[s],z=h.duration;A&&r.preventDefault();if(m){clearTimeout(u);u=setTimeout(f,h.interval)}if(!x){s=s<0?0:B-1;if(o==s)if(h.cycle)s=
B-s-1;else return;x=y[s]}if(!(!x||h.lock&&p.is(":animated")||A&&h.onBefore&&h.onBefore(r,x,p,i(),s)===false)){h.stop&&p.queue("fx",[]).stop();if(h.constant)z=Math.abs(z/j*(o-s));p.scrollTo(x,z,h).trigger("notify.serialScroll",[s])}}function f(){p.trigger("next.serialScroll")}function i(){return b(n,q)}function g(r){if(!isNaN(r))return r;for(var w=i(),s;(s=w.index(r))==-1&&r!=q;)r=r.parentNode;return s}var h=b.extend({},a.defaults,e),l=h.event,j=h.step,k=h.lazy,t=h.target?this:document,p=b(h.target||
this,t),q=p[0],n=h.items,o=h.start,m=h.interval,v=h.navigation,u;k||(n=i());h.force&&d({},o);b(h.prev||[],t).bind(l,-j,c);b(h.next||[],t).bind(l,j,c);q.ssbound||p.bind("prev.serialScroll",-j,c).bind("next.serialScroll",j,c).bind("goto.serialScroll",d);m&&p.bind("start.serialScroll",function(){if(!m){clearTimeout(u);m=true;f()}}).bind("stop.serialScroll",function(){clearTimeout(u);m=false});p.bind("notify.serialScroll",function(r,w){var s=g(w);if(s>-1)o=s});q.ssbound=true;if(h.jump)(k?p:i()).bind(l,
function(r){d(r,g(r.target))});if(v)v=b(v,t).bind(l,function(r){r.data=Math.round(i().length/v.length)*v.index(this);d(r,this)})})}})(jQuery);(function(b){function a(c){return typeof c=="object"?c:{top:c,left:c}}var e=b.scrollTo=function(c,d,f){b(window).scrollTo(c,d,f)};e.defaults={axis:"xy",duration:parseFloat(b.fn.jquery)>=1.3?0:1};e.window=function(){return b(window)._scrollable()};b.fn._scrollable=function(){return this.map(function(){if(!(!this.nodeName||b.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1))return this;var c=(this.contentWindow||this).document||this.ownerDocument||this;return b.browser.safari||
c.compatMode=="BackCompat"?c.body:c.documentElement})};b.fn.scrollTo=function(c,d,f){if(typeof d=="object"){f=d;d=0}if(typeof f=="function")f={onAfter:f};if(c=="max")c=9E9;f=b.extend({},e.defaults,f);d=d||f.speed||f.duration;f.queue=f.queue&&f.axis.length>1;if(f.queue)d/=2;f.offset=a(f.offset);f.over=a(f.over);return this._scrollable().each(function(){function i(p){h.animate(k,d,f.easing,p&&function(){p.call(this,c,f)})}var g=this,h=b(g),l=c,j,k={},t=h.is("html,body");switch(typeof l){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(l)){l=
a(l);break}l=b(l,this);case "object":if(l.is||l.style)j=(l=b(l)).offset()}b.each(f.axis.split(""),function(p,q){var n=q=="x"?"Left":"Top",o=n.toLowerCase(),m="scroll"+n,v=g[m],u=e.max(g,q);if(j){k[m]=j[o]+(t?0:v-h.offset()[o]);if(f.margin){k[m]-=parseInt(l.css("margin"+n))||0;k[m]-=parseInt(l.css("border"+n+"Width"))||0}k[m]+=f.offset[o]||0;if(f.over[o])k[m]+=l[q=="x"?"width":"height"]()*f.over[o]}else{n=l[o];k[m]=n.slice&&n.slice(-1)=="%"?parseFloat(n)/100*u:n}if(/^\d+$/.test(k[m]))k[m]=k[m]<=0?
0:Math.min(k[m],u);if(!p&&f.queue){v!=k[m]&&i(f.onAfterFirst);delete k[m]}});i(f.onAfter)}).end()};e.max=function(c,d){var f=d=="x"?"Width":"Height",i="scroll"+f;if(!b(c).is("html,body"))return c[i]-b(c)[f.toLowerCase()]();f="client"+f;var g=c.ownerDocument.documentElement,h=c.ownerDocument.body;return Math.max(g[i],h[i])-Math.min(g[f],h[f])}})(jQuery);scope_name="plingback";window[scope_name]={};var pb=window[scope_name];pb.config={gen_feedback_id:true,fixed_feedback_id:false,feedback_uri:null};
pb.configure=function(){pb.config.plings_endpoint="http://feeds.plings.net/activity.php/";pb.config.pling_id=pb.utils.getParameterByName("pling_id");if(pb.config.gen_feedback_id)pb.config.feedback_id=pb.utils.genUUID();if(pb.config.fixed_feedback_id)pb.config.feedback_id=pb.config.fixed_feedback_id;pb.config.multiuser=pb.utils.getParameterByName("multiuser")?true:false;pb.config.thanks_url_id=pb.utils.getParameterByName("thanks_url");pb.config.plingback_endpoint="/api/plingbacks";return pb.config};
pb.api=$({});
pb.api.events={plingLoaded:{name:"plingLoaded",doc:"Triggered when pling data has been fetched. Provides access to the data as event.pling",attrs:["pling"],toString:function(){return this.name}},formSending:{name:"formSending",doc:"Triggered when a form has been serialized we are awaiting the server response. Provides access to the form object as event.form",attr:["form"],toString:function(){return this.name}},formSent:{name:"formSent",doc:"Triggered when a server response to a form send has been recieved. Provides access to the response as event.data",attr:["data"],
toString:function(){return this.name}}};pb.api.getPlingDetails=function(){$.getJSON(pb.config.plings_endpoint+pb.config.pling_id.toString()+".json?suppressLinkedActivities=true&callback=?",pb.api.pling_loaded)};pb.api.pling_loaded=function(b){pb.config.pling=b.activity;pb.config.mode=Date.parseString(pb.config.pling.Starts,"yyyy-MM-dd HH:mm:ss").isBefore(new Date)?"after":"before";b=jQuery.Event(pb.api.events.plingLoaded.toString());b.pling=pb.config.pling;pb.api.trigger(b)};
pb.api.send=function(b){var a=null;a=b.target.tagName==="FORM"?$(b.target):$(b.target.form);var e={};e.pling_id=pb.config.pling_id;e.plingback_type=pb.config.plingback_type;e.plingback_version=pb.config.plingback_version;$("input",a).each(function(){$(this).val($(this).val()===$(this).data("pb_hint")?"":$(this).val())});a.serializeArray();jQuery.each(a.serializeArray(),function(d,f){if(f.value===0||f.value)if(e.hasOwnProperty(f.name))if(e[f.name]instanceof Array)e[f.name].push(f.value);else e[f.name]=
[e[f.name],f.value];else e[f.name]=f.value});b=pb.config.plingback_endpoint;var c="post";if(pb.config.feedback_id){e.feedback_id=pb.config.feedback_id;b+="/";b+=pb.config.feedback_id;c="put";if(pb.config.feedback_uri){c="post";b+="/";b+=e.feedback_attribute}if($("input[name=mode]",a).val()==="overwrite")c="put"}jQuery.ajax({type:c,url:b,data:e,success:pb.api.sendCallback,dataType:"json"});b=jQuery.Event(pb.api.events.formSending.toString());b.form=a;pb.api.trigger(b);return false};
pb.api.sendCallback=function(b){pb.config.feedback_id=b.feedback_id;pb.config.feedback_uri=b.feedback_uri;var a=jQuery.Event(pb.api.events.formSent.toString());a.data=b;pb.api.trigger(a)};pb.utils={};pb.utils.getParameterByName=function(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");b=RegExp("[\\?&]"+b+"=([^&#]*)").exec(window.location.href);return b===null?"":b[1]};
pb.utils.genUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var a=Math.random()*16|0;return(b=="x"?a:a&3|8).toString(16)}).toUpperCase()};pb.utils.validateEmail=function(b){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(b)};
pb.utils.validatePhone=function(b){return/^((\+\d{1,3}(-| |\s)?\(?\d\)?(-| |\s)?\d{1,5})|(\(?\d{2,6}\)?))(-| |\s)?(\d{3,4})(-| |\s)?(\d{4})(( x| ext)\d{1,5}){0,1}$/.test(b.replace(/\s+/g,""))};(function(b){b.widget("ui.stars",{options:{inputType:"radio",split:0,disabled:false,cancelTitle:"Cancel Rating",cancelValue:0,cancelShow:true,disableValue:true,oneVoteOnly:false,showTitles:false,captionEl:null,callback:null,starWidth:16,cancelClass:"ui-stars-cancel",starClass:"ui-stars-star",starOnClass:"ui-stars-star-on",starHoverClass:"ui-stars-star-hover",starDisabledClass:"ui-stars-star-disabled",cancelHoverClass:"ui-stars-cancel-hover",cancelDisabledClass:"ui-stars-cancel-disabled"},_create:function(){function a(i,
g){if(i!=-1){var h=g?d.starHoverClass:d.starOnClass,l=g?d.starOnClass:d.starHoverClass;c.$stars.eq(i).prevAll("."+d.starClass).andSelf().removeClass(l).addClass(h);c.$stars.eq(i).nextAll("."+d.starClass).removeClass(d.starHoverClass+" "+d.starOnClass);c._showCap(d.id2title[i])}else e()}function e(){c.$stars.removeClass(d.starOnClass+" "+d.starHoverClass);c._showCap("")}var c=this,d=this.options,f=0;this.element.data("former.stars",this.element.html());d.isSelect=d.inputType=="select";this.$form=b(this.element).closest("form");
this.$selec=d.isSelect?b("select",this.element):null;this.$rboxs=d.isSelect?b("option",this.$selec):b(":radio",this.element);this.$stars=this.$rboxs.map(function(i){var g={value:this.value,title:(d.isSelect?this.text:this.title)||this.value,isDefault:d.isSelect&&this.defaultSelected||this.defaultChecked};if(i==0){d.split=typeof d.split!="number"?0:d.split;d.val2id=[];d.id2val=[];d.id2title=[];d.name=d.isSelect?c.$selec.get(0).name:this.name;d.disabled=d.disabled||(d.isSelect?b(c.$selec).attr("disabled"):
b(this).attr("disabled"))}if(g.value==d.cancelValue){d.cancelTitle=g.title;return null}d.val2id[g.value]=f;d.id2val[f]=g.value;d.id2title[f]=g.title;if(g.isDefault){d.checked=f;d.value=d.defaultValue=g.value;d.title=g.title}i=b("<div/>").addClass(d.starClass);g=b("<a/>").attr("title",d.showTitles?g.title:"").text(g.value);if(d.split){var h=f%d.split,l=Math.floor(d.starWidth/d.split);i.width(l);g.css("margin-left","-"+h*l+"px")}f++;return i.append(g).get(0)});d.items=f;d.isSelect?this.$selec.remove():
this.$rboxs.remove();this.$cancel=b("<div/>").addClass(d.cancelClass).append(b("<a/>").attr("title",d.showTitles?d.cancelTitle:"").text(d.cancelValue));d.cancelShow&=!d.disabled&&!d.oneVoteOnly;d.cancelShow&&this.element.append(this.$cancel);this.element.append(this.$stars);if(d.checked===undefined){d.checked=-1;d.value=d.defaultValue=d.cancelValue;d.title=""}this.$value=b("<input type='hidden' name='"+d.name+"' value='"+d.value+"' />");this.element.append(this.$value);this.$stars.bind("click.stars",
function(i){if(!d.forceSelect&&d.disabled)return false;var g=c.$stars.index(this);d.checked=g;d.value=d.id2val[g];d.title=d.id2title[g];c.$value.attr({disabled:d.disabled?"disabled":"",value:d.value});a(g,false);c._disableCancel();!d.forceSelect&&c.callback(i,"star")}).bind("mouseover.stars",function(){if(d.disabled)return false;var i=c.$stars.index(this);a(i,true)}).bind("mouseout.stars",function(){if(d.disabled)return false;a(c.options.checked,false)});this.$cancel.bind("click.stars",function(i){if(!d.forceSelect&&
(d.disabled||d.value==d.cancelValue))return false;d.checked=-1;d.value=d.cancelValue;d.title="";c.$value.val(d.value);d.disableValue&&c.$value.attr({disabled:"disabled"});e();c._disableCancel();!d.forceSelect&&c.callback(i,"cancel")}).bind("mouseover.stars",function(){if(c._disableCancel())return false;c.$cancel.addClass(d.cancelHoverClass);e();c._showCap(d.cancelTitle)}).bind("mouseout.stars",function(){if(c._disableCancel())return false;c.$cancel.removeClass(d.cancelHoverClass);c.$stars.triggerHandler("mouseout.stars")});
this.$form.bind("reset.stars",function(){!d.disabled&&c.select(d.defaultValue)});b(window).unload(function(){c.$cancel.unbind(".stars");c.$stars.unbind(".stars");c.$form.unbind(".stars");c.$selec=c.$rboxs=c.$stars=c.$value=c.$cancel=c.$form=null});this.select(d.value);d.disabled&&this.disable()},_disableCancel:function(){var a=this.options,e=a.disabled||a.oneVoteOnly||a.value==a.cancelValue;e?this.$cancel.removeClass(a.cancelHoverClass).addClass(a.cancelDisabledClass):this.$cancel.removeClass(a.cancelDisabledClass);
this.$cancel.css("opacity",e?0.5:1);return e},_disableAll:function(){var a=this.options;this._disableCancel();a.disabled?this.$stars.filter("div").addClass(a.starDisabledClass):this.$stars.filter("div").removeClass(a.starDisabledClass)},_showCap:function(a){var e=this.options;e.captionEl&&e.captionEl.text(a)},value:function(){return this.options.value},select:function(a){var e=this.options;a=a==e.cancelValue?this.$cancel:this.$stars.eq(e.val2id[a]);e.forceSelect=true;a.triggerHandler("click.stars");
e.forceSelect=false},selectID:function(a){var e=this.options;a=a==-1?this.$cancel:this.$stars.eq(a);e.forceSelect=true;a.triggerHandler("click.stars");e.forceSelect=false},enable:function(){this.options.disabled=false;this._disableAll()},disable:function(){this.options.disabled=true;this._disableAll()},destroy:function(){this.$form.unbind(".stars");this.$cancel.unbind(".stars").remove();this.$stars.unbind(".stars").remove();this.$value.remove();this.element.unbind(".stars").html(this.element.data("former.stars")).removeData("stars");
return this},callback:function(a,e){var c=this.options;c.callback&&c.callback(this,e,c.value,a);c.oneVoteOnly&&!c.disabled&&this.disable()}});b.extend(b.ui.stars,{version:"3.0.1"})})(jQuery);jQuery.preloadCssImages=function(b){function a(){clearTimeout(g);if(f&&f.length&&f[d]){d++;if(b.statusTextEl){var h=f[d]?"Now Loading: <span>"+f[d].split("/")[f[d].split("/").length-1]:"Loading complete";jQuery(b.statusTextEl).html('<span class="numLoaded">'+d+'</span> of <span class="numTotal">'+f.length+'</span> loaded (<span class="percentLoaded">'+(d/f.length*100).toFixed(0)+'%</span>) <span class="currentImg">'+h+"</span></span>")}if(b.statusBarEl){h=jQuery(b.statusBarEl).width();jQuery(b.statusBarEl).css("background-position",
-(h-(h*d/f.length).toFixed(0))+"px 50%")}e()}}function e(){if(f&&f.length&&f[d]){var h=new Image;h.src=f[d];h.complete?a():jQuery(h).bind("error load onreadystatechange",a);g=setTimeout(a,b.errorDelay)}}function c(h,l){for(var j=false,k=[],t=[],p,q=h.length;q--;){var n="";if(l&&l[q])p=l[q];else{p=(h[q].href?h[q].href:"window.location.href").split("/");p.pop();if(p=p.join("/"))p+="/"}if(h[q].cssRules||h[q].rules){i=h[q].cssRules?h[q].cssRules:h[q].rules;for(var o=i.length;o--;)if(i[o].style&&i[o].style.cssText){var m=
i[o].style.cssText;if(m.toLowerCase().indexOf("url")!=-1)n+=m}else if(i[o].styleSheet){k.push(i[o].styleSheet);j=true}}if(n=n.match(/[^\("]+\.(gif|jpg|jpeg|png)/g))for(o=n.length;o--;){m=n[o].charAt(0)=="/"||n[o].match("://")?n[o]:p+n[o];jQuery.inArray(m,f)==-1&&f.push(m)}if(!j&&h[q].imports&&h[q].imports.length){n=0;for(o=h[q].imports.length;n<o;n++){m=h[q].imports[n].href;m=m.split("/");m.pop();if(m=m.join("/"))m+="/";m=m.charAt(0)=="/"||m.match("://")?m:p+m;t.push(m);k.push(h[q].imports[n])}}}if(k.length){c(k,
t);return false}for(j=b.simultaneousCacheLoading;j--;)setTimeout(e,j)}b=jQuery.extend({statusTextEl:null,statusBarEl:null,errorDelay:999,simultaneousCacheLoading:2},b);var d=0,f=[],i,g;c(document.styleSheets);return f};jQuery.easing.jswing=jQuery.easing.swing;
jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(b,a,e,c,d){return jQuery.easing[jQuery.easing.def](b,a,e,c,d)},easeInQuad:function(b,a,e,c,d){return c*(a/=d)*a+e},easeOutQuad:function(b,a,e,c,d){return-c*(a/=d)*(a-2)+e},easeInOutQuad:function(b,a,e,c,d){if((a/=d/2)<1)return c/2*a*a+e;return-c/2*(--a*(a-2)-1)+e},easeInCubic:function(b,a,e,c,d){return c*(a/=d)*a*a+e},easeOutCubic:function(b,a,e,c,d){return c*((a=a/d-1)*a*a+1)+e},easeInOutCubic:function(b,a,e,c,d){if((a/=d/2)<1)return c/
2*a*a*a+e;return c/2*((a-=2)*a*a+2)+e},easeInQuart:function(b,a,e,c,d){return c*(a/=d)*a*a*a+e},easeOutQuart:function(b,a,e,c,d){return-c*((a=a/d-1)*a*a*a-1)+e},easeInOutQuart:function(b,a,e,c,d){if((a/=d/2)<1)return c/2*a*a*a*a+e;return-c/2*((a-=2)*a*a*a-2)+e},easeInQuint:function(b,a,e,c,d){return c*(a/=d)*a*a*a*a+e},easeOutQuint:function(b,a,e,c,d){return c*((a=a/d-1)*a*a*a*a+1)+e},easeInOutQuint:function(b,a,e,c,d){if((a/=d/2)<1)return c/2*a*a*a*a*a+e;return c/2*((a-=2)*a*a*a*a+2)+e},easeInSine:function(b,
a,e,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+e},easeOutSine:function(b,a,e,c,d){return c*Math.sin(a/d*(Math.PI/2))+e},easeInOutSine:function(b,a,e,c,d){return-c/2*(Math.cos(Math.PI*a/d)-1)+e},easeInExpo:function(b,a,e,c,d){return a==0?e:c*Math.pow(2,10*(a/d-1))+e},easeOutExpo:function(b,a,e,c,d){return a==d?e+c:c*(-Math.pow(2,-10*a/d)+1)+e},easeInOutExpo:function(b,a,e,c,d){if(a==0)return e;if(a==d)return e+c;if((a/=d/2)<1)return c/2*Math.pow(2,10*(a-1))+e;return c/2*(-Math.pow(2,-10*--a)+2)+e},
easeInCirc:function(b,a,e,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+e},easeOutCirc:function(b,a,e,c,d){return c*Math.sqrt(1-(a=a/d-1)*a)+e},easeInOutCirc:function(b,a,e,c,d){if((a/=d/2)<1)return-c/2*(Math.sqrt(1-a*a)-1)+e;return c/2*(Math.sqrt(1-(a-=2)*a)+1)+e},easeInElastic:function(b,a,e,c,d){b=1.70158;var f=0,i=c;if(a==0)return e;if((a/=d)==1)return e+c;f||(f=d*0.3);if(i<Math.abs(c)){i=c;b=f/4}else b=f/(2*Math.PI)*Math.asin(c/i);return-(i*Math.pow(2,10*(a-=1))*Math.sin((a*d-b)*2*Math.PI/f))+e},easeOutElastic:function(b,
a,e,c,d){b=1.70158;var f=0,i=c;if(a==0)return e;if((a/=d)==1)return e+c;f||(f=d*0.3);if(i<Math.abs(c)){i=c;b=f/4}else b=f/(2*Math.PI)*Math.asin(c/i);return i*Math.pow(2,-10*a)*Math.sin((a*d-b)*2*Math.PI/f)+c+e},easeInOutElastic:function(b,a,e,c,d){b=1.70158;var f=0,i=c;if(a==0)return e;if((a/=d/2)==2)return e+c;f||(f=d*0.3*1.5);if(i<Math.abs(c)){i=c;b=f/4}else b=f/(2*Math.PI)*Math.asin(c/i);if(a<1)return-0.5*i*Math.pow(2,10*(a-=1))*Math.sin((a*d-b)*2*Math.PI/f)+e;return i*Math.pow(2,-10*(a-=1))*Math.sin((a*
d-b)*2*Math.PI/f)*0.5+c+e},easeInBack:function(b,a,e,c,d,f){if(f==undefined)f=1.70158;return c*(a/=d)*a*((f+1)*a-f)+e},easeOutBack:function(b,a,e,c,d,f){if(f==undefined)f=1.70158;return c*((a=a/d-1)*a*((f+1)*a+f)+1)+e},easeInOutBack:function(b,a,e,c,d,f){if(f==undefined)f=1.70158;if((a/=d/2)<1)return c/2*a*a*(((f*=1.525)+1)*a-f)+e;return c/2*((a-=2)*a*(((f*=1.525)+1)*a+f)+2)+e},easeInBounce:function(b,a,e,c,d){return c-jQuery.easing.easeOutBounce(b,d-a,0,c,d)+e},easeOutBounce:function(b,a,e,c,d){return(a/=
d)<1/2.75?c*7.5625*a*a+e:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+0.75)+e:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+0.9375)+e:c*(7.5625*(a-=2.625/2.75)*a+0.984375)+e},easeInOutBounce:function(b,a,e,c,d){if(a<d/2)return jQuery.easing.easeInBounce(b,a*2,0,c,d)*0.5+e;return jQuery.easing.easeOutBounce(b,a*2-d,0,c,d)*0.5+c*0.5+e}});Date.$VERSION=1.02;Date.LZ=function(b){return(b<0||b>9?"":"0")+b};Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.monthAbbreviations=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.dayAbbreviations=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];Date.preferAmericanFormat=true;
if(!Date.prototype.getFullYear)Date.prototype.getFullYear=function(){var b=this.getYear();return b<1900?b+1900:b};
Date.parseString=function(b,a){if(typeof a=="undefined"||a==null||a==""){var e=["M/d/y","M-d-y","M.d.y","M/d","M-d"],c=["d/M/y","d-M-y","d.M.y","d/M","d-M"];c=[["y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d","MMM-d","d-MMM"],Date.preferAmericanFormat?e:c,Date.preferAmericanFormat?c:e];for(e=0;e<c.length;e++)for(var d=c[e],f=0;f<d.length;f++){var i=Date.parseString(b,d[f]);if(i!=null)return i}return null}this.isInteger=function(o){for(var m=0;m<o.length;m++)if("1234567890".indexOf(o.charAt(m))==
-1)return false;return true};this.getInt=function(o,m,v,u){for(;u>=v;u--){var r=o.substring(m,m+u);if(r.length<v)break;if(this.isInteger(r))return r}return null};b+="";a+="";d=c=0;for(var g=e="",h=(new Date).getFullYear(),l=1,j=1,k=0,t=0,p=0,q="";d<a.length;){e=a.charAt(d);for(g="";a.charAt(d)==e&&d<a.length;)g+=a.charAt(d++);if(g=="yyyy"||g=="yy"||g=="y"){if(g=="yyyy")i=f=4;if(g=="yy")i=f=2;if(g=="y"){f=2;i=4}h=this.getInt(b,c,f,i);if(h==null)return null;c+=h.length;if(h.length==2)h=h>70?1900+(h-
0):2E3+(h-0)}else if(g=="MMM"||g=="NNN"){l=0;g=g=="MMM"?Date.monthNames.concat(Date.monthAbbreviations):Date.monthAbbreviations;for(e=0;e<g.length;e++){var n=g[e];if(b.substring(c,c+n.length).toLowerCase()==n.toLowerCase()){l=e%12+1;c+=n.length;break}}if(l<1||l>12)return null}else if(g=="EE"||g=="E"){g=g=="EE"?Date.dayNames:Date.dayAbbreviations;for(e=0;e<g.length;e++){n=g[e];if(b.substring(c,c+n.length).toLowerCase()==n.toLowerCase()){c+=n.length;break}}}else if(g=="MM"||g=="M"){l=this.getInt(b,
c,g.length,2);if(l==null||l<1||l>12)return null;c+=l.length}else if(g=="dd"||g=="d"){j=this.getInt(b,c,g.length,2);if(j==null||j<1||j>31)return null;c+=j.length}else if(g=="hh"||g=="h"){k=this.getInt(b,c,g.length,2);if(k==null||k<1||k>12)return null;c+=k.length}else if(g=="HH"||g=="H"){k=this.getInt(b,c,g.length,2);if(k==null||k<0||k>23)return null;c+=k.length}else if(g=="KK"||g=="K"){k=this.getInt(b,c,g.length,2);if(k==null||k<0||k>11)return null;c+=k.length;k++}else if(g=="kk"||g=="k"){k=this.getInt(b,
c,g.length,2);if(k==null||k<1||k>24)return null;c+=k.length;k--}else if(g=="mm"||g=="m"){t=this.getInt(b,c,g.length,2);if(t==null||t<0||t>59)return null;c+=t.length}else if(g=="ss"||g=="s"){p=this.getInt(b,c,g.length,2);if(p==null||p<0||p>59)return null;c+=p.length}else if(g=="a"){if(b.substring(c,c+2).toLowerCase()=="am")q="AM";else if(b.substring(c,c+2).toLowerCase()=="pm")q="PM";else return null;c+=2}else if(b.substring(c,c+g.length)!=g)return null;else c+=g.length}if(c!=b.length)return null;if(l==
2)if(h%4==0&&h%100!=0||h%400==0){if(j>29)return null}else if(j>28)return null;if(l==4||l==6||l==9||l==11)if(j>30)return null;if(k<12&&q=="PM")k=k-0+12;else if(k>11&&q=="AM")k-=12;return new Date(h,l-1,j,k,t,p)};Date.isValid=function(b,a){return Date.parseString(b,a)!=null};Date.prototype.isBefore=function(b){if(b==null)return false;return this.getTime()<b.getTime()};Date.prototype.isAfter=function(b){if(b==null)return false;return this.getTime()>b.getTime()};
Date.prototype.equals=function(b){if(b==null)return false;return this.getTime()==b.getTime()};Date.prototype.equalsIgnoreTime=function(b){if(b==null)return false;var a=(new Date(this.getTime())).clearTime();b=(new Date(b.getTime())).clearTime();return a.getTime()==b.getTime()};
Date.prototype.format=function(b){b+="";var a="",e=0,c="",d="";c=this.getYear()+"";d=this.getMonth()+1;var f=this.getDate(),i=this.getDay(),g=this.getHours(),h=this.getMinutes(),l=this.getSeconds(),j={};if(c.length<4)c=""+(+c+1900);j.y=""+c;j.yyyy=c;j.yy=c.substring(2,4);j.M=d;j.MM=Date.LZ(d);j.MMM=Date.monthNames[d-1];j.NNN=Date.monthAbbreviations[d-1];j.d=f;j.dd=Date.LZ(f);j.E=Date.dayAbbreviations[i];j.EE=Date.dayNames[i];j.H=g;j.HH=Date.LZ(g);j.h=g==0?12:g>12?g-12:g;j.hh=Date.LZ(j.h);j.K=j.h-
1;j.k=j.H+1;j.KK=Date.LZ(j.K);j.kk=Date.LZ(j.k);j.a=g>11?"PM":"AM";j.m=h;j.mm=Date.LZ(h);j.s=l;for(j.ss=Date.LZ(l);e<b.length;){c=b.charAt(e);for(d="";b.charAt(e)==c&&e<b.length;)d+=b.charAt(e++);a+=typeof j[d]!="undefined"?j[d]:d}return a};Date.prototype.getDayName=function(){return Date.dayNames[this.getDay()]};Date.prototype.getDayAbbreviation=function(){return Date.dayAbbreviations[this.getDay()]};Date.prototype.getMonthName=function(){return Date.monthNames[this.getMonth()]};
Date.prototype.getMonthAbbreviation=function(){return Date.monthAbbreviations[this.getMonth()]};Date.prototype.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};
Date.prototype.add=function(b,a){if(typeof b=="undefined"||b==null||typeof a=="undefined"||a==null)return this;a=+a;if(b=="y")this.setFullYear(this.getFullYear()+a);else if(b=="M")this.setMonth(this.getMonth()+a);else if(b=="d")this.setDate(this.getDate()+a);else if(b=="w")for(var e=a>0?1:-1;a!=0;){for(this.add("d",e);this.getDay()==0||this.getDay()==6;)this.add("d",e);a-=e}else if(b=="h")this.setHours(this.getHours()+a);else if(b=="m")this.setMinutes(this.getMinutes()+a);else b=="s"&&this.setSeconds(this.getSeconds()+
a);return this};
